webpackJsonp([66],{"1zgL":function(t,e,a){"use strict";function i(t){a("iynq"),a("36AD")}Object.defineProperty(e,"__esModule",{value:!0});var n=a("Teyd"),s=a("rUKV"),o=a("qs7J"),r=i,l=Object(o.a)(n.a,s.a,s.b,!1,r,"data-v-2390fac0",null);e.default=l.exports},"36AD":function(t,e,a){var i=a("PeYL");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("FIqI")("799e78e8",i,!0,{})},NG4l:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAAXNSR0IArs4c6QAAATtJREFUKBVjZICC////M770qk8BcpMZ/jNqg4UZ/18F0nPFtzXOYWRk/A8SYwQRr4NaJf9+/7UEqMkJxEcHQMX7mDnZYkTXVT9nApkMU8yiIsnAyM8FVw9ig8RABkHVMDJnnvqf+v8/Qx5IQqgjgYHDWovhx+GrDIwcrAxCnYkM3H7mDD/P3WX49+6z4tdlB56yAI1LBhn59/VHhr9vPjGwyouBFYLEQOzfD1+B5UB8IEhmgnnw/8dvDO/K54MVgBTCFIPEQHJgAAwMJgiLeJKJARJ0YM+C3AwzGeQUEBskBg8IoFqQDXNB5jOL8jMwi/CBnQRyxvvyBWA2SAwkBwVzGSER1rAHFHSgkAJ5HuZmkMkgxX/uPGcAxYX4tgYXJlAMgiIFJACSgCkGmQhiwxRD1fwHxzRYksikAQBZz6bA60d9pgAAAABJRU5ErkJggg=="},O3OP:function(t,e,a){"use strict";(function(t){a.d(e,"a",function(){return o});var i=a("EuEE"),n=a("6nXL"),s=a("zO6J"),o={getTableData:function(t,e){i.a.DataEncSubmit("seat_get.php",t,function(t){e&&"function"==typeof e&&e(t)})},changeTableData:function(t,e){i.a.DataEncSubmit("seat_save.php",t,function(t){e&&"function"==typeof e&&e(t)})},shallowRefresh:function(t){s.a.replace({path:"/refresh",query:{name:t}})},getQrCode:function(t,e){i.a.DataEncSubmit("img_get.php",t,function(t){e&&"function"==typeof e&&e(t)})},getId:function(t,e){i.a.DataEncSubmit("gen_id.php",t,function(t){e&&"function"==typeof e&&e(t)})},search:function(t,e,a){var i=[];for(var s in a)t&&t!==n.B.code[0]||""!==e?""===e&&a[s].seat_region===t?i.push(a[s]):a[s].seat_region===t&&(a[s].seat_id.indexOf(e)>-1||a[s].seat_name.indexOf(e)>-1)?i.push(a[s]):t===n.B.code[0]&&(a[s].seat_id.indexOf(e)>-1||a[s].seat_name.indexOf(e)>-1)?i.push(a[s]):!t&&(a[s].seat_id.indexOf(e)>-1||a[s].seat_name.indexOf(e)>-1)&&i.push(a[s]):i=a;return i},getTableEditor:function(t,e){i.a.DataEncSubmit("seat_get.php",t,function(t){e&&"function"==typeof e&&e(t)})},changePage:function(e,a,i){for(var n in e)e[n]=Number(e[n]+1),a===i?t(".el-checkbox__input").eq(e[n]).addClass("is-checked"):t(".el-checkbox__input").eq(e[n]).removeClass("is-checked")},editTagArr:function(t,e){i.a.DataEncSubmit("shopinfo_save.php",t,function(t){e&&"function"==typeof e&&e(t)})},getTagArr:function(t,e){i.a.DataEncSubmit("shopinfo_get.php",t,function(t){e&&"function"==typeof e&&e(t)})},getBackstageName:function(t){return"SEAT_REGION"===t?t="shop_seat_region":"SEAT_TYPE"===t?t="shop_seat_type":"TABLE_TYPE"===t&&(t="shop_seat_shape"),t},getUniqueList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(void 0!==t&&t.length>0){for(var e={},a=[],i=[],n=[],s=[],o=[],r=0;r<t.length;r++)-1===a.indexOf(t[r].seat_type)&&a.push(t[r].seat_type),-1===i.indexOf(t[r].seat_region)&&i.push(t[r].seat_region),-1===n.indexOf(t[r].seat_shape)&&n.push(t[r].seat_shape),-1===s.indexOf(t[r].seat_id)&&s.push(t[r].seat_id),-1===o.indexOf(t[r].seat_name)&&o.push(t[r].seat_name);return e.SEAT_REGION=i,e.SEAT_TYPE=a,e.TABLE_TYPE=n,e.TABLE_NO=s,e.SEAT_NAME=o,e}},getUniqueType:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0!==t&&t.length>0&&void 0!==e){var a=function(t){return-1===e.indexOf(t)};return t.filter(a).concat(e)}},objTansToArr:function(t){var e=[];for(var a in t)e.push(t[a]);return e},isNull:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=0;e<t.length;e++)null!=t[e]&&""!==t[e]||t.splice(e,1);return t}}}).call(e,a("L7Pj"))},PeYL:function(t,e,a){e=t.exports=a("I71c")(!1),e.push([t.i,"#selectTable .el-input{margin-left:20px;width:300px;height:34px}#selectTable .el-form-item__error{position:absolute;top:100%;left:6%;font-size:12px;color:#e7487e}",""])},Rgwc:function(t,e,a){var i=a("gbsh");e=t.exports=a("I71c")(!1),e.push([t.i,'.mask[data-v-2390fac0]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:9990;background:rgba(0,0,0,.5);-webkit-box-sizing:border-box;box-sizing:border-box}.messageBox[data-v-2390fac0]{width:540px;min-height:370px;position:absolute;top:250px;left:690px;background:#fff;z-index:9991}.heade[data-v-2390fac0]{font-family:MicrosoftYaHei;font-size:16px;color:#fff;letter-spacing:.57px;text-align:center;background:#5a8cff;height:40px;line-height:40px}.main[data-v-2390fac0]{padding-left:80px;font-size:14px}.add[data-v-2390fac0]{width:100%;margin:40px 0 20px;cursor:pointer}.el-button[data-v-2390fac0]{width:60px;height:34px}.el-button[data-v-2390fac0],.el-button[data-v-2390fac0]:hover{color:#4877e7;border:1px solid #4877e7;cursor:pointer}.btn .el-button[data-v-2390fac0],.deleteBtn .el-button[data-v-2390fac0]{color:#4877e7;width:160px;height:40px;cursor:pointer;margin-bottom:50px}.el-button.confirm_btn[data-v-2390fac0]{background:#4877e7;color:#fff;margin-right:60px;margin-left:0;cursor:pointer}.main .btn[data-v-2390fac0]{margin-top:90px;padding-top:20px;margin-bottom:30px;cursor:pointer}.deleteBtn[data-v-2390fac0]{margin-top:20px;cursor:pointer}.tag[data-v-2390fac0]{position:relative;padding:5px 10px;border:1px solid #d8d8d8;color:#666;font-size:14px;text-align:center;vertical-align:middle;margin:0 5px 10px;border-radius:5px;display:inline-block;cursor:pointer}.tagGroup[data-v-2390fac0]{width:400px;list-style:none}.tag.selected[data-v-2390fac0]{background:#4877e7;border:1px solid #4877e7;color:#fff;z-index:9992}.red[data-v-2390fac0]{font-size:12px;color:#e7487e;cursor:pointer}.tab-tips[data-v-2390fac0]{display:inline-block;margin-top:28px}.inputContainer .add-btn[data-v-2390fac0]{width:60px;height:32px;font-size:14px;color:#5a8cff;line-height:32px;text-align:center;border:1px solid #5a8cff;margin-top:4px;margin-left:20px;margin-right:10px;display:inline-block;cursor:pointer}.inputContainer[data-v-2390fac0]{margin-bottom:60px}.left[data-v-2390fac0]{float:left}.delete_btn[data-v-2390fac0]{position:absolute;left:450px;cursor:pointer}.deleteSelect[data-v-2390fac0]{position:absolute;top:50px;left:440px}.blue[data-v-2390fac0]{font-size:14px;color:#4877e7;margin-right:10px}.selecteDelete[data-v-2390fac0]:after{width:12px;height:12px;position:absolute;content:"";background-image:url('+i(a("NG4l"))+");background-repeat:no-repeated;top:0;right:0;cursor:pointer}.selecteDelete[data-v-2390fac0]{border:1px solid #d8d8d8!important;color:#666!important}.tips[data-v-2390fac0]{color:red;font-size:12px}",""])},Teyd:function(t,e,a){"use strict";(function(t){var i=a("3cXf"),n=a.n(i),s=a("O3OP"),o=a("a2vD"),r=a("swMD");e.a={props:["name","history","hisTaOb"],data:function(){var t=this;return{addTags:[],deleteTags:[],value:"",beforDeleteTags:[],hisTaObData:{},shuopId:"",hisTagObj:{},tableObj:{},cantAddTip:!1,cantDeleTip:!1,showDelete:!0,ruleForm:{inputValue:""},rules:{inputValue:[{validator:function(e,a,i){""===a?i(new Error("标签不能为空")):t.addTags&&-1!==t.addTags.indexOf(t.ruleForm.inputValue)?i(new Error("标签已经存在")):a.length>5?i(new Error("标签名称不能超过5个字符")):t.addTags&&t.addTags.length>=30?i(new Error("已超过标签上限，请先删除再添加!")):i()},trigger:"click"}]}}},created:function(){this.initTagList(),this.shuopId=o.a.getShopid()},methods:{initTagList:function(){var t=this;this.hisTaObData=this.hisTaOb;var e=s.a.getBackstageName(this.name.id);s.a.getTagArr({get_shop_label:1,label_name:e},function(a){if(null!==r.a.getItem("hisTagObj")&&void 0!==r.a.getItem("hisTagObj")||t.hisTaObData&&t.hisTaObData[t.name.id]&&0!==t.hisTaObData[t.name.id].length){var i=t.hisTaObData&&t.hisTaObData[t.name.id]&&0===t.hisTaObData[t.name.id].length?t.hisTaObData:r.a.getItem("hisTagObj");t.hisTaObData&&null!==t.hisTaObData||(t.hisTaObData=r.a.getItem("hisTagObj")),t.hisTagObj=s.a.isNull(i[t.name.id]),t.tableObj=void 0===r.a.getItem("hisTagObj")?[]:r.a.getItem("hisTagObj")[t.name.id],t.tableObj=s.a.isNull(t.tableObj);var n=[];n=s.a.objTansToArr(a.data[e]),t.addTags=s.a.getUniqueType(t.hisTagObj,n)}else t.addTags=void 0===a.data[e]?[]:a.data[e],null===a.data[e]&&(t.addTags=[]),void 0!==t.history&&""!==t.history&&-1===t.addTags.indexOf(t.history)&&t.addTags.push(t.history)})},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.addTags&&e.addTags.push(e.ruleForm.inputValue),e.ruleForm.inputValue=""})},addTag:function(t){this.submitForm(t),this.addTags.length>=30&&(this.cantAddTip=!0)},selectTag:function(e,a){!0===this.showDelete?(t(".tag").eq(a).addClass("selected").siblings().removeClass("selected"),this.value=e):(this.value="",void 0===r.a.getItem("hisTagObj")||-1===this.tableObj.indexOf(e)?(this.deleteTags=this.deleteArrayItem(this.addTags,e),this.cantDeleTip=!1):this.$slnotify({message:"该标签已被使用,不能被删除!"}))},confirm:function(){var t=this;""===this.value&&(this.value=this.history);var e=s.a.getBackstageName(this.name.id),a={save_label:1,shop_id:this.shuopId,label_name:e};a&&(a[e]=n()(this.addTags)),s.a.editTagArr(a,function(){t.$emit("my-add",[t.value,t.name.id,t.addTags])})},cancel:function(){this.$emit("my-cancle",[this.name.id,this.addTags])},deleteArrayItem:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1];return t.forEach(function(a,i){if(a===e)return void t.splice(i,1)}),t},showDeleteSelect:function(){this.beforDeleteTags=this.addTags.slice(),this.deleteTags=this.addTags.slice(),t(".tag").removeClass("selected").addClass("selecteDelete"),this.showDelete=!1},afterShowDelete:function(){t(".tag").removeClass("selecteDelete");for(var e in t(".tag"))t(".tag")[e].innerText===this.history&&t(".tag")[e].classList.add("selected");this.cantDeleTip=!1,this.cantAddTip=!1},confirmDelete:function(){this.afterShowDelete(),this.addTags=this.deleteTags,this.showDelete=!0,this.deleteTagMethods()},deleteTagMethods:function(){var t=s.a.getBackstageName(this.name.id),e={save_label:1,shop_id:this.shuopId,label_name:t};e&&(e[t]=n()(this.addTags)),s.a.editTagArr(e)},cancelDelete:function(){this.afterShowDelete(),this.addTags=this.beforDeleteTags,this.showDelete=!0}}}}).call(e,a("L7Pj"))},iynq:function(t,e,a){var i=a("Rgwc");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("FIqI")("786ece48",i,!0,{})},rUKV:function(t,e,a){"use strict";a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"selectTable"}},[a("div",{staticClass:"mask"}),t._v(" "),a("div",{staticClass:"messageBox"},[a("div",{staticClass:"heade"},[t._v("添加"+t._s(t.name.label)+" ")]),t._v(" "),a("div",{staticClass:"main"},[a("span",{staticClass:"tab-tips"},[t._v("请选择标签（ 单选 ）")]),t._v(" "),t.showDelete?a("span",{staticClass:"red delete_btn tab-tips",attrs:{type:"text",size:"small"},on:{click:t.showDeleteSelect}},[t._v("\n        删除\n      ")]):t._e(),t._v(" "),a("div",{staticClass:"add"},[a("ul",{staticClass:"tagGroup"},t._l(t.addTags,function(e,i){return a("li",{key:i,staticClass:"tag",class:[{selected:t.history==e&&t.showDelete},{selecteDelete:!t.showDelete},"tag"],on:{click:function(a){t.selectTag(e,i)}}},[t._v(t._s(e))])}))]),t._v(" "),a("div",{staticClass:"inputContainer"},[t.showDelete?a("el-form",{ref:"Form",staticClass:"left",attrs:{model:t.ruleForm,rules:t.rules}},[a("el-form-item",{attrs:{prop:"inputValue"}},[a("el-input",{attrs:{placeholder:"请输入标签名称，字数不超过5个字"},model:{value:t.ruleForm.inputValue,callback:function(e){t.$set(t.ruleForm,"inputValue",e)},expression:"ruleForm.inputValue"}})],1)],1):t._e(),t._v(" "),t.showDelete?a("div",{staticClass:"add-btn left",on:{click:function(e){t.addTag("Form")}}},[t._v("添加")]):t._e()],1),t._v(" "),t.showDelete?a("div",{staticClass:"btn"},[a("el-button",{staticClass:"confirm_btn ",on:{click:t.confirm}},[t._v("确定")]),t._v(" "),a("el-button",{on:{click:t.cancel}},[t._v("取消")])],1):a("div",{staticClass:"deleteBtn"},[a("el-button",{staticClass:"confirm_btn ",on:{click:t.confirmDelete}},[t._v("确定")]),t._v(" "),a("el-button",{on:{click:t.cancelDelete}},[t._v("取消")])],1)])])])},n=[]}});