webpackJsonp([44],{"18pq":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"staffTable"}},[n("div",{staticClass:"table_title"},[e._v("详情列表")]),e._v(" "),n("div",{staticClass:"search-content left clearfix"},[n("span",{staticClass:"search_title"},[e._v("职位")]),e._v(" "),n("el-select",{attrs:{"allow-create":"",placeholder:"全部"},model:{value:e.dutyName,callback:function(t){e.dutyName=t},expression:"dutyName"}},[n("el-option",{attrs:{label:"全部",value:"全部"}}),e._v(" "),e._l(e.dutyArr,function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})],2),e._v(" "),n("span",{staticClass:"search_title"},[e._v("姓名")]),e._v(" "),n("el-input",{model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}}),e._v(" "),n("span",{staticClass:"search_title"},[e._v("电话号码")]),e._v(" "),n("el-input",{model:{value:e.searchTel,callback:function(t){e.searchTel=t},expression:"searchTel"}}),e._v(" "),n("el-button",{on:{click:e.searchMethod}},[e._v("搜索")])],1),e._v(" "),n("div",{staticClass:"table-list"},[n("el-table",{staticStyle:{width:"100%"},attrs:{border:"",height:e.tableHeight,data:e.staffList,stripe:""}},[n("el-table-column",{attrs:{type:"selection","min-width":"35"}}),e._v(" "),n("el-table-column",{attrs:{prop:"employee_id",label:"员工ID",sortable:"",align:"center","min-width":"70"}}),e._v(" "),n("el-table-column",{attrs:{prop:"userid",label:"工号",sortable:"",align:"center","min-width":"70"}}),e._v(" "),n("el-table-column",{attrs:{prop:"real_name",label:"姓名",align:"center","min-width":"90"}}),e._v(" "),n("el-table-column",{attrs:{prop:"duty",label:"职务",align:"center","min-width":"70"}}),e._v(" "),n("el-table-column",{attrs:{prop:"department_id",label:"部门",align:"center","min-width":"70"}}),e._v(" "),n("el-table-column",{attrs:{prop:"phone",label:"手机号码",align:"center","min-width":"120"}}),e._v(" "),n("el-table-column",{attrs:{prop:"is_weixin",label:"微信绑定",align:"center","min-width":"70"}}),e._v(" "),n("el-table-column",{attrs:{prop:"remark",label:"备注",align:"center","min-width":"140"}}),e._v(" "),n("el-table-column",{attrs:{prop:"is_freeze",label:"状态",sortable:"",align:"center","min-width":"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{class:e._f("statusFilter")(t.row.is_freeze)},[e._v(e._s(t.row.is_freeze))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作","min-width":"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.is_freeze==e.is_enable||null==t.row.is_freeze?n("span",{staticClass:"red",attrs:{size:"small",type:"info"},on:{click:function(n){e.handleModifyStatus(t.row,0)}}},[e._v("冻结\n\t\t\t\t\t")]):n("span",{staticClass:"green",attrs:{size:"small",type:"success"},on:{click:function(n){e.handleModifyStatus(t.row,1)}}},[e._v("启用\n\t\t\t\t\t")]),e._v(" "),n("router-link",{attrs:{to:{path:"/staff/edit",query:{employeeId:t.row.employee_id}}}},[n("span",{staticClass:"blue",attrs:{size:"small",type:"text"}},[e._v("编辑\n\t\t\t\t\t\t")])]),e._v(" "),n("span",{staticClass:"red",attrs:{size:"small",type:"text"},on:{click:function(n){e.handleDelete(t.row)}}},[e._v("删除\n\t\t\t\t\t")])]}}])})],1),e._v(" "),n("div",{staticClass:"pagination-container"},[n("el-pagination",{attrs:{small:"","current-page":e.showStaffList.page,"page-sizes":[10,20,30,40],"page-size":e.showStaffList.limit,layout:"sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.showStaffList,"page",t)}}})],1)],1)])},i=[],o={render:a,staticRenderFns:i};t.a=o},"5g5b":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=(n("Yp/U"),n("6nXL")),i=n("MVSX"),o=n("EuEE"),s={initTreeData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t=t.map(function(t){return i.default.set(t,"canEditor",!1),i.default.set(t,"addIcon",!0),i.default.set(t,"editorIcon",!0),i.default.set(t,"deleteIcon",!0),i.default.set(t,"isShowBtn",!1),i.default.set(t,"isActive",!1),i.default.set(t,"breakshow",!1),i.default.set(t,"allShow",!1),i.default.set(t,"isExpand",!0),i.default.set(t,"isFolder",!1),t.hasOwnProperty("employee_list")&&t.employee_list.length>0&&e.initTreeData(t.employee_list),t})},addTitleToTree:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};return i.default.set(t,"department_name","部门管理"),i.default.set(t,"employee_list",e),i.default.set(t,"department_id","0"),t},generateKey:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments[1];return t=t.map(function(t,a){return t.key=n+"-"+a.toString(),t.hasOwnProperty("employee_list")&&t.employee_list.length>0&&e.generateKey(t.employee_list,t.key),t})},getKeylength:function(e){if(!o.a.isEmpty(e)){return e.split("-").length}},selectIcon:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t=t.map(function(t){var n=e.getKeylength(t.key);2===n?(t.addIcon=!0,t.editorIcon=!1,t.deleteIcon=!1,t.isExpand=!0,t.isActive=!0):3===n?(t.addIcon=!1,t.editorIcon=!0,t.deleteIcon=!0,t.isExpand=!1,t.isFolder=!0):4===n&&(t.addIcon=!1,t.editorIcon=!1,t.deleteIcon=!1),t.hasOwnProperty("employee_list")&&t.employee_list.length>0&&e.selectIcon(t.employee_list)})},saveDepartName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return function e(n){n.forEach(function(n){n.hasOwnProperty("department_name")&&"部门管理"!==n.department_name&&t.push(n.department_name),n.hasOwnProperty("employee_list")&&n.employee_list.length>0&&e(n.employee_list)})}(e),t},treeDataById:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};return function e(n){n.forEach(function(n){n.hasOwnProperty("department_id")?t[n.department_id]=n:n.hasOwnProperty("employee_id")&&(t[n.employee_id]=n),n.hasOwnProperty("employee_list")&&n.employee_list.length>0&&e(n.employee_list)})}(e),t},changeSelecte:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.department_id?e.department_id:e.employee_id;for(var a in t)t.hasOwnProperty(a)&&(t[a].isActive=n===a)},getDutyArr:function(e){var t=[];return e.forEach(function(e){-1==t.indexOf(e.duty)&&t.push(e.duty)}),t},search:function(e,t,n,i){var o=[],s=new RegExp(e,"g"),r=new RegExp(t,"g"),l=new RegExp(n,"g");return i.forEach(function(f){e&&e!=a.c.code[0]||""!=t||""!=n?null!==s.exec(f.duty)&&""==t&&""==n?o.push(f):null!==s.exec(f.duty)&&null!==r.exec(f.real_name)&&""==n?o.push(f):null!==s.exec(f.duty)&&null!==r.exec(f.real_name)&&null!==l.exec(f.phone)?o.push(f):null!==s.exec(f.duty)&&null!==l.exec(f.phone)&&""==t?o.push(f):(e&&e!=a.c.code[0]||null===r.exec(f.real_name)||null===l.exec(f.phone))&&(e&&e!=a.c.code[0]||""!=t||null===l.exec(f.phone))?e&&e!=a.c.code[0]||null===r.exec(f.real_name)||""!=n||o.push(f):o.push(f):o=i}),o},getTotal:function(e){if(void 0!=e&&e.length>0){for(var t=0,n=0;n<e.length;n++)t++;return t}},getPageList:function(e,t,n){if(void 0!=e&&e.length>0){return e.filter(function(e,a){return a<t*n&&a>=t*(n-1)})}},isRight:function(e){return e.forEach(function(e){var t,n=[],i=[];for(var o in a.j)void 0!==e.position_permission?(t=e.position_permission&a.j[o],0!==t&&(i.push(a.j.code[t]),n.push(t)),e.arrId=n,e.arrRight=i):(e.arrId=0,e.arrRight=a.c.code[0])}),e},judgeStaffList:function(e,t){if(0==t)return e.forEach(function(e){null==e.is_freeze||e.is_freeze==a.k.NO?e.is_freeze=a.k.code[a.k.NO]:e.is_freeze=a.k.code[a.k.YES],null==e.is_weixin||e.isWechat==a.k.NO?e.is_weixin=a.l.code[a.l.NO]:e.is_weixin=a.l.code[a.l.YES]}),e;if(1==t){var n=[];return e.forEach(function(e){for(var t in a.j)e==a.j.code[a.j[t]]&&(e=a.j[t],n.push(e))}),n}}}},"9Kq+":function(e,t,n){"use strict";(function(e){var a=(n("MVSX"),n("Yp/U")),i=n("5g5b"),o=n("6nXL");t.a={data:function(){return{tableHeight:0,dutyName:"",searchName:"",searchTel:"",staffList:[],searchList:[],dutyArr:[],is_enable:"",showStaffList:{page:1,limit:10},total:10}},created:function(){var t=this;this.tableHeight=document.documentElement.clientHeight-270,e(window).resize(function(){t.tableHeight=document.documentElement.clientHeight-270}),this.initTableList()},computed:{departId:function(){return this.$store.state.staff.departId},departInforList:function(){return this.$store.state.staff.departInforList},pageSize:function(){return this.$store.state.staff.pageSize},departNameSave:function(){return this.$store.state.staff.departNameSave}},watch:{departId:function(e){this.dutyName="",this.searchName="",this.saleTel="",0==e?this.initTableList():this.getDepartStaff()}},methods:{initTableList:function(){var e=this;a.a.getStaffList({get_employee_list:1},function(t){console.log(t),e.is_enable=o.k.code[o.k.NO],e.staffList=t.data.employee_list,e.staffList=i.a.judgeStaffList(e.staffList,0),e.searchList=i.a.judgeStaffList(e.staffList,0),e.dutyArr=i.a.getDutyArr(e.staffList),e.total=i.a.getTotal(e.searchList),e.staffList=i.a.getPageList(t.data.employee_list,e.showStaffList.limit,e.showStaffList.page)})},getDepartStaff:function(){var e=this;if(0!==this.departId){var t={get_department_employee:1,department_id:this.departId};a.a.getDepartStaffList(t,function(t){e.staffList=t.data.employee_list})}},handleModifyStatus:function(e,t){e.is_freeze=t==o.k.NO?o.k.code[o.k.YES]:o.k.code[o.k.NO];var n={freeze_employee:1,employee_id:e.userid,type:t};return a.a.getUserInfor(n,function(e){console.log(t)}),!1},handleDelete:function(e){var t=this,n={del_employee:1,employee_id:e.employee_id};return a.a.getUserInfor(n,function(e){t.initTableList()}),this.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),!1},searchMethod:function(){this.staffList=i.a.search(this.dutyName,this.searchName,this.searchTel,this.searchList)},handleSizeChange:function(e){this.showStaffList.limit=e,this.staffList=i.a.getPageList(this.searchList,this.showStaffList.limit,this.showStaffList.page),this.total=i.a.getTotal(this.searchList)},handleCurrentChange:function(e){this.showStaffList.page=e,this.total=i.a.getTotal(this.searchList),this.staffList=i.a.getPageList(this.searchList,this.showStaffList.limit,this.showStaffList.page)}},filters:{statusFilter:function(e){var t=["red","green"];return e==o.k.code[o.k.NO]?t[e]="green":t[e]="red",t[e]}}}}).call(t,n("tra3"))},JA2s:function(e,t,n){var a=n("TXMQ");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("8bSs")("48f40306",a,!0)},KOx0:function(e,t,n){var a=n("UfDV");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("8bSs")("321529c8",a,!0)},TXMQ:function(e,t,n){t=e.exports=n("BkJT")(!0),t.push([e.i,'.left{float:left}.right{float:right}.clearfix:after{content:"";display:block;clear:both}#staffTable{font-size:0}#staffTable .search-content .el-input{font-size:14px;width:inherit;margin-right:20px}#staffTable .search-content .el-input .el-input__inner{width:180px;height:34px;border-radius:0}#staffTable .el-button{width:100px;height:34px;border:1px solid #4877e7;color:#4877e7;border-radius:0;font-size:14px}#staffTable .el-table .el-button{width:50px;height:30px;color:#fff;border:none}',"",{version:3,sources:["E:/ordering/www/shop/html/src/modules/staff/view/staffTable.vue"],names:[],mappings:"AACA,MACE,UAAY,CACb,AACD,OACE,WAAa,CACd,AACD,gBACE,WAAY,AACZ,cAAe,AACf,UAAY,CACb,AACD,YACE,WAAa,CACd,AACD,sCACI,eAAgB,AAChB,cAAe,AACf,iBAAmB,CACtB,AACD,uDACM,YAAa,AACb,YAAa,AACb,eAAiB,CACtB,AACD,uBACI,YAAa,AACb,YAAa,AACb,yBAA0B,AAC1B,cAAe,AACf,gBAAiB,AACjB,cAAgB,CACnB,AACD,iCACI,WAAY,AACZ,YAAa,AACb,WAAe,AACf,WAAa,CAChB",file:"staffTable.vue",sourcesContent:["\n.left {\n  float: left;\n}\n.right {\n  float: right;\n}\n.clearfix:after {\n  content: '';\n  display: block;\n  clear: both;\n}\n#staffTable {\n  font-size: 0;\n}\n#staffTable .search-content .el-input {\n    font-size: 14px;\n    width: inherit;\n    margin-right: 20px;\n}\n#staffTable .search-content .el-input .el-input__inner {\n      width: 180px;\n      height: 34px;\n      border-radius: 0;\n}\n#staffTable .el-button {\n    width: 100px;\n    height: 34px;\n    border: 1px solid #4877e7;\n    color: #4877e7;\n    border-radius: 0;\n    font-size: 14px;\n}\n#staffTable .el-table .el-button {\n    width: 50px;\n    height: 30px;\n    color: #FFFFFF;\n    border: none;\n}\n"],sourceRoot:""}])},UfDV:function(e,t,n){t=e.exports=n("BkJT")(!0),t.push([e.i,'.left[data-v-3eb4d300]{float:left}.right[data-v-3eb4d300]{float:right}.clearfix[data-v-3eb4d300]:after{content:"";display:block;clear:both}#staffTable[data-v-3eb4d300]{background:#fff;-webkit-box-shadow:0 2px 4px 0 #becaeb;box-shadow:0 2px 4px 0 #becaeb}.table_title[data-v-3eb4d300]{width:100%;height:40px;font-size:14px;color:#666;line-height:40px;background-color:#f6f8fc;padding-left:14px}.search-content[data-v-3eb4d300]{margin:20px 14px 20px 0}.search_title[data-v-3eb4d300]{font-size:14px;padding:14px}.table-list[data-v-3eb4d300]{height:100%;background:#fff;padding:14px 14px 0}.pagination-container[data-v-3eb4d300]{margin:50px 0 50px 524px;font-family:MicrosoftYaHei;font-size:12px;color:#666;letter-spacing:.43px}.pageSize[data-v-3eb4d300]{font-size:12px;width:70px;height:34px;margin-right:10px}div.el-select.el-input[data-v-3eb4d300]{font-size:12px}.jump[data-v-3eb4d300]{font-size:12px;margin-right:10px}.jump .el-input[data-v-3eb4d300]{font-size:12px;width:80px;height:34px}.jump .el-button[data-v-3eb4d300]{font-size:12px;width:30px;height:34px;background:#f3f3f3}.blue[data-v-3eb4d300]{font-size:14px;color:#4877e7;margin-right:14px}.red[data-v-3eb4d300]{font-size:14px;color:#e7487e;margin-right:14px}.green[data-v-3eb4d300]{font-size:14px;color:#32cd32;margin-right:14px}',"",{version:3,sources:["E:/ordering/www/shop/html/src/modules/staff/view/staffTable.vue"],names:[],mappings:"AACA,uBACE,UAAY,CACb,AACD,wBACE,WAAa,CACd,AACD,iCACE,WAAY,AACZ,cAAe,AACf,UAAY,CACb,AACD,6BACE,gBAAoB,AACpB,uCAAwC,AAChC,8BAAgC,CACzC,AACD,8BACE,WAAY,AACZ,YAAa,AACb,eAAgB,AAChB,WAAe,AACf,iBAAkB,AAClB,yBAA0B,AAC1B,iBAAmB,CACpB,AACD,iCACE,uBAAyB,CAC1B,AACD,+BACE,eAAgB,AAChB,YAAc,CACf,AACD,6BACE,YAAa,AACb,gBAAoB,AACpB,mBAA0B,CAC3B,AACD,uCACE,yBAA0B,AAC1B,2BAA4B,AAC5B,eAAgB,AAChB,WAAe,AACf,oBAAuB,CACxB,AACD,2BACE,eAAgB,AAChB,WAAY,AACZ,YAAa,AACb,iBAAmB,CACpB,AACD,wCACE,cAAgB,CACjB,AACD,uBACE,eAAgB,AAChB,iBAAmB,CACpB,AACD,iCACE,eAAgB,AAChB,WAAY,AACZ,WAAa,CACd,AACD,kCACE,eAAgB,AAChB,WAAY,AACZ,YAAa,AACb,kBAAoB,CACrB,AACD,uBACE,eAAgB,AAChB,cAAe,AACf,iBAAmB,CACpB,AACD,sBACE,eAAgB,AAChB,cAAe,AACf,iBAAmB,CACpB,AACD,wBACE,eAAgB,AAChB,cAAiB,AACjB,iBAAmB,CACpB",file:"staffTable.vue",sourcesContent:["\n.left[data-v-3eb4d300] {\n  float: left;\n}\n.right[data-v-3eb4d300] {\n  float: right;\n}\n.clearfix[data-v-3eb4d300]:after {\n  content: '';\n  display: block;\n  clear: both;\n}\n#staffTable[data-v-3eb4d300] {\n  background: #ffffff;\n  -webkit-box-shadow: 0 2px 4px 0 #becaeb;\n          box-shadow: 0 2px 4px 0 #becaeb;\n}\n.table_title[data-v-3eb4d300] {\n  width: 100%;\n  height: 40px;\n  font-size: 14px;\n  color: #666666;\n  line-height: 40px;\n  background-color: #f6f8fc;\n  padding-left: 14px;\n}\n.search-content[data-v-3eb4d300] {\n  margin: 20px 14px 20px 0;\n}\n.search_title[data-v-3eb4d300] {\n  font-size: 14px;\n  padding: 14px;\n}\n.table-list[data-v-3eb4d300] {\n  height: 100%;\n  background: #FFFFFF;\n  padding: 14px 14px 0 14px;\n}\n.pagination-container[data-v-3eb4d300] {\n  margin: 50px 0 50px 524px;\n  font-family: MicrosoftYaHei;\n  font-size: 12px;\n  color: #666666;\n  letter-spacing: 0.43px;\n}\n.pageSize[data-v-3eb4d300] {\n  font-size: 12px;\n  width: 70px;\n  height: 34px;\n  margin-right: 10px;\n}\ndiv.el-select.el-input[data-v-3eb4d300] {\n  font-size: 12px;\n}\n.jump[data-v-3eb4d300] {\n  font-size: 12px;\n  margin-right: 10px;\n}\n.jump .el-input[data-v-3eb4d300] {\n  font-size: 12px;\n  width: 80px;\n  height: 34px;\n}\n.jump .el-button[data-v-3eb4d300] {\n  font-size: 12px;\n  width: 30px;\n  height: 34px;\n  background: #F3F3F3;\n}\n.blue[data-v-3eb4d300] {\n  font-size: 14px;\n  color: #4877E7;\n  margin-right: 14px;\n}\n.red[data-v-3eb4d300] {\n  font-size: 14px;\n  color: #E7487E;\n  margin-right: 14px;\n}\n.green[data-v-3eb4d300] {\n  font-size: 14px;\n  color: limegreen;\n  margin-right: 14px;\n}\n"],sourceRoot:""}])},"Vt+j":function(e,t,n){"use strict";function a(e){n("KOx0"),n("JA2s")}Object.defineProperty(t,"__esModule",{value:!0});var i=n("9Kq+"),o=n("18pq"),s=n("46Yf"),r=a,l=s(i.a,o.a,!1,r,"data-v-3eb4d300",null);t.default=l.exports},"Yp/U":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n("EuEE"),i={getDepartList:function(e,t){a.a.DataEncSubmit("department_get.php",e,function(e){t&&"function"==typeof t&&t(e)})},modifyDepartInfo:function(e,t){a.a.DataEncSubmit("department_save.php",e,function(e){t&&"function"==typeof t&&t(e)})},getStaffList:function(e,t){a.a.DataEncSubmit("employee_get.php",e,function(e){t&&"function"==typeof t&&t(e)})},getDepartStaffList:function(e,t){a.a.DataEncSubmit("department_get.php",e,function(e){t&&"function"==typeof t&&t(e)})},modifyStaffInfo:function(e,t){a.a.DataEncSubmit("user_info.php",e,function(e){t&&"function"==typeof t&&t(e)})},getPhoneTest:function(e,t){a.a.DataEncSubmit("customer_save.php",e,function(e){t&&"function"==typeof t&&t(e)})},getUserInfor:function(e,t){a.a.DataEncSubmit("employee_save.php",e,function(e){t&&"function"==typeof t&&t(e)})},editDutyRight:function(e,t){a.a.DataEncSubmit("position_save.php",e,function(e){t&&"function"==typeof t&&t(e)})},getDutyList:function(e,t){a.a.DataEncSubmit("position_get.php",e,function(e){t&&"function"==typeof t&&t(e)})}}}});
//# sourceMappingURL=44.51734393ffec9a906e40.js.map