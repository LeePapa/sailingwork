webpackJsonp([58],{"5g5b":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var a=(n("Yp/U"),n("6nXL")),i=n("MVSX"),o=n("EuEE"),r={initTreeData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e=e.map(function(e){return i.default.set(e,"canEditor",!1),i.default.set(e,"addIcon",!0),i.default.set(e,"editorIcon",!0),i.default.set(e,"deleteIcon",!0),i.default.set(e,"isShowBtn",!1),i.default.set(e,"isActive",!1),i.default.set(e,"breakshow",!1),i.default.set(e,"allShow",!1),i.default.set(e,"isExpand",!0),i.default.set(e,"isFolder",!1),e.hasOwnProperty("employee_list")&&e.employee_list.length>0&&t.initTreeData(e.employee_list),e})},addTitleToTree:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e={};return i.default.set(e,"department_name","部门管理"),i.default.set(e,"employee_list",t),i.default.set(e,"department_id","0"),e},generateKey:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments[1];return e=e.map(function(e,a){return e.key=n+"-"+a.toString(),e.hasOwnProperty("employee_list")&&e.employee_list.length>0&&t.generateKey(e.employee_list,e.key),e})},getKeylength:function(t){if(!o.a.isEmpty(t)){return t.split("-").length}},selectIcon:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e=e.map(function(e){var n=t.getKeylength(e.key);2===n?(e.addIcon=!0,e.editorIcon=!1,e.deleteIcon=!1,e.isExpand=!0,e.isActive=!0):3===n?(e.addIcon=!1,e.editorIcon=!0,e.deleteIcon=!0,e.isExpand=!1,e.isFolder=!0):4===n&&(e.addIcon=!1,e.editorIcon=!1,e.deleteIcon=!1),e.hasOwnProperty("employee_list")&&e.employee_list.length>0&&t.selectIcon(e.employee_list)})},saveDepartName:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[];return function t(n){n.forEach(function(n){n.hasOwnProperty("department_name")&&"部门管理"!==n.department_name&&e.push(n.department_name),n.hasOwnProperty("employee_list")&&n.employee_list.length>0&&t(n.employee_list)})}(t),e},treeDataById:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e={};return function t(n){n.forEach(function(n){n.hasOwnProperty("department_id")?e[n.department_id]=n:n.hasOwnProperty("employee_id")&&(e[n.employee_id]=n),n.hasOwnProperty("employee_list")&&n.employee_list.length>0&&t(n.employee_list)})}(t),e},changeSelecte:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.department_id?t.department_id:t.employee_id;for(var a in e)e.hasOwnProperty(a)&&(e[a].isActive=n===a)},getDutyArr:function(t){var e=[];return t.forEach(function(t){-1==e.indexOf(t.duty)&&e.push(t.duty)}),e},search:function(t,e,n,i){var o=[],r=new RegExp(t,"g"),l=new RegExp(e,"g"),s=new RegExp(n,"g");return i.forEach(function(u){t&&t!=a.c.code[0]||""!=e||""!=n?null!==r.exec(u.duty)&&""==e&&""==n?o.push(u):null!==r.exec(u.duty)&&null!==l.exec(u.real_name)&&""==n?o.push(u):null!==r.exec(u.duty)&&null!==l.exec(u.real_name)&&null!==s.exec(u.phone)?o.push(u):null!==r.exec(u.duty)&&null!==s.exec(u.phone)&&""==e?o.push(u):(t&&t!=a.c.code[0]||null===l.exec(u.real_name)||null===s.exec(u.phone))&&(t&&t!=a.c.code[0]||""!=e||null===s.exec(u.phone))?t&&t!=a.c.code[0]||null===l.exec(u.real_name)||""!=n||o.push(u):o.push(u):o=i}),o},getTotal:function(t){if(void 0!=t&&t.length>0){for(var e=0,n=0;n<t.length;n++)e++;return e}},getPageList:function(t,e,n){if(void 0!=t&&t.length>0){return t.filter(function(t,a){return a<e*n&&a>=e*(n-1)})}},isRight:function(t){return t.forEach(function(t){var e,n=[],i=[];for(var o in a.j)void 0!==t.position_permission?(e=t.position_permission&a.j[o],0!==e&&(i.push(a.j.code[e]),n.push(e)),t.arrId=n,t.arrRight=i):(t.arrId=0,t.arrRight=a.c.code[0])}),t},judgeStaffList:function(t,e){if(0==e)return t.forEach(function(t){null==t.is_freeze||t.is_freeze==a.k.NO?t.is_freeze=a.k.code[a.k.NO]:t.is_freeze=a.k.code[a.k.YES],null==t.is_weixin||t.isWechat==a.k.NO?t.is_weixin=a.l.code[a.l.NO]:t.is_weixin=a.l.code[a.l.YES]}),t;if(1==e){var n=[];return t.forEach(function(t){for(var e in a.j)t==a.j.code[a.j[e]]&&(t=a.j[e],n.push(t))}),n}}}},"Bn/x":function(t,e,n){e=t.exports=n("BkJT")(!0),e.push([t.i,'.left[data-v-daf63204]{float:left}.right[data-v-daf63204]{float:right}.clearfix[data-v-daf63204]:after{content:"";display:block;clear:both}.blue[data-v-daf63204]{font-size:14px;color:#4877e7}.red[data-v-daf63204]{font-size:14px;color:#e7487e}',"",{version:3,sources:["E:/ordering/www/shop/html/src/modules/staff/view/positionManagement.vue"],names:[],mappings:"AACA,uBACE,UAAY,CACb,AACD,wBACE,WAAa,CACd,AACD,iCACE,WAAY,AACZ,cAAe,AACf,UAAY,CACb,AACD,uBACE,eAAgB,AAChB,aAAe,CAChB,AACD,sBACE,eAAgB,AAChB,aAAe,CAChB",file:"positionManagement.vue",sourcesContent:["\n.left[data-v-daf63204] {\n  float: left;\n}\n.right[data-v-daf63204] {\n  float: right;\n}\n.clearfix[data-v-daf63204]:after {\n  content: '';\n  display: block;\n  clear: both;\n}\n.blue[data-v-daf63204] {\n  font-size: 14px;\n  color: #4877E7;\n}\n.red[data-v-daf63204] {\n  font-size: 14px;\n  color: #E7487E;\n}\n"],sourceRoot:""}])},H9SB:function(t,e,n){"use strict";function a(t){n("w289")}Object.defineProperty(e,"__esModule",{value:!0});var i=n("XQ/Z"),o=n("Quf4"),r=n("46Yf"),l=a,s=r(i.a,o.a,!1,l,"data-v-daf63204",null);e.default=s.exports},Quf4:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"positionManagement"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"650"}},[n("el-table-column",{attrs:{label:"职位","min-width":"280",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.position_name,function(a,i){return e.row.entry_type&&"1"!=e.row.entry_type?t._l(e.row.position_name,function(a,i){return n("span",[t._v(t._s(a)),i==e.row.arrRight.length?n("span",[t._v("(默认)")]):t._e()])}):n("span",[t._v(t._s(a)),i==e.row.position_name.length-1?n("span",[t._v("(默认)")]):t._e()])})}}])}),t._v(" "),n("el-table-column",{attrs:{label:"权限","min-width":"280",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.arrRight,function(a,i){return n("span",[t._v(t._s(a)),i<e.row.arrRight.length-1&&0!==e.row.is_admin?n("span",[t._v(",")]):t._e()])})}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作","min-width":"380",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return 0!==e.row.is_admin?[n("router-link",{attrs:{to:{path:"/staff/editDuty",query:{infor:e.row}}}},[n("span",{staticClass:"blue",attrs:{size:"small",type:"text"}},[t._v("编辑\n\t\t\t\t\t\t")])]),t._v(" "),n("span",{staticClass:"red",attrs:{size:"small",type:"text"},on:{click:function(n){t.handleDelete(e.row)}}},[t._v("删除\n\t\t\t\t\t")])]:void 0}}])})],1)],1)},i=[],o={render:a,staticRenderFns:i};e.a=o},"XQ/Z":function(t,e,n){"use strict";var a=n("Yp/U"),i=n("5g5b");e.a={data:function(){return{tableData:[{position_name:"管理员",arrRight:"全部",entry_type:1,is_admin:0}]}},created:function(){this.initTableList()},methods:{initTableList:function(){var t=this,e={get_position_list:1};a.a.getDutyList(e,function(e){t.tableData=t.tableData.concat(e.data.position_list),t.tableData=i.a.isRight(t.tableData),console.log(t.tableData)})},handleDelete:function(t){console.log(t)}}}},"Yp/U":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var a=n("EuEE"),i={getDepartList:function(t,e){a.a.DataEncSubmit("department_get.php",t,function(t){e&&"function"==typeof e&&e(t)})},modifyDepartInfo:function(t,e){a.a.DataEncSubmit("department_save.php",t,function(t){e&&"function"==typeof e&&e(t)})},getStaffList:function(t,e){a.a.DataEncSubmit("employee_get.php",t,function(t){e&&"function"==typeof e&&e(t)})},getDepartStaffList:function(t,e){a.a.DataEncSubmit("department_get.php",t,function(t){e&&"function"==typeof e&&e(t)})},modifyStaffInfo:function(t,e){a.a.DataEncSubmit("user_info.php",t,function(t){e&&"function"==typeof e&&e(t)})},getPhoneTest:function(t,e){a.a.DataEncSubmit("customer_save.php",t,function(t){e&&"function"==typeof e&&e(t)})},getUserInfor:function(t,e){a.a.DataEncSubmit("employee_save.php",t,function(t){e&&"function"==typeof e&&e(t)})},editDutyRight:function(t,e){a.a.DataEncSubmit("position_save.php",t,function(t){e&&"function"==typeof e&&e(t)})},getDutyList:function(t,e){a.a.DataEncSubmit("position_get.php",t,function(t){e&&"function"==typeof e&&e(t)})}}},w289:function(t,e,n){var a=n("Bn/x");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("8bSs")("9cf2df7e",a,!0)}});
//# sourceMappingURL=58.a44f761b7ce64beaa1c3.js.map