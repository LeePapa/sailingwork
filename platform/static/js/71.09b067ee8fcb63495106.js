webpackJsonp([71],{WAUJ:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("hbDG"),s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"edit-position"}},[i("div",{staticClass:"header"},[i("p",["/areaagent/organize"!==t.$route.query.pathName?i("span",[t.$route.query.ag_employee_id?i("span",[i("router-link",{attrs:{to:{path:"/areaagent/organize",query:{activeIndex:"1"}}}},[i("span",{staticClass:"black"},[t._v("员工管理")])]),t._v(" "),i("span",{staticClass:"black"},[t._v(">")]),t._v(" "),i("span",{staticClass:"black",on:{click:t.goEditStaffInfo}},[t._v("编辑员工信息")])],1):i("span",[i("router-link",{attrs:{to:{path:"/areaagent/organize",query:{activeIndex:"1"}}}},[i("span",{staticClass:"black"},[t._v("员工管理")])]),t._v(" "),i("span",{staticClass:"black"},[t._v(">")]),t._v(" "),i("span",{staticClass:"black",on:{click:t.goEditStaffInfo}},[t._v("创建员工")])],1)]):i("router-link",{attrs:{to:{path:"/areaagent/organize",query:{activeIndex:"2"}}}},[i("span",{staticClass:"black"},[t._v("职级管理")])]),t._v(" "),i("span",{staticClass:"text-green"},[t._v(">")]),t._v(" "),t.$route.query.positionId?i("span",{staticClass:"text-green"},[t._v("编辑职位信息")]):i("span",{staticClass:"text-green"},[t._v("新增职位信息")])],1)]),t._v(" "),i("div",{staticClass:"basic-info",style:{height:t.height}},[t._m(0),t._v(" "),i("div",{staticClass:"basic-info",style:{height:t.height}},[i("el-form",{ref:"form",attrs:{model:t.form,"label-width":"100px",size:"mini",rules:t.rules}},[i("el-form-item",{attrs:{label:"职位名称",prop:"name"}},[i("el-input",{staticClass:"one-four",on:{input:function(e){t.cheInput("form")}},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1)],1),t._v(" "),i("div",{staticClass:"btn-group"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!0===t.isCantClick,expression:"isCantClick===true"}],staticClass:"save-btn cant-click",on:{click:t.unFinish}},[t._v("保存")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!1===t.isCantClick,expression:"isCantClick===false"}],staticClass:"save-btn",on:{click:t.saveInfo}},[t._v("保存")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!0===t.isCantClick&&""===t.positionId,expression:"isCantClick===true&&positionId === ''"}],staticClass:"save-btn cant-click",on:{click:t.unFinish}},[t._v("保存并继续添加")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!1===t.isCantClick&&""===t.positionId,expression:"isCantClick===false&&positionId === ''"}],staticClass:"save-btn",on:{click:t.saveAddInfo}},[t._v("保存并继续添加")]),t._v(" "),i("div",{staticClass:"cancel-btn",on:{click:t.cancelInfo}},[t._v("取消")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title-bar"},[e("span",{staticClass:"text-strong"},[this._v("职位信息")])])}]},o=function(t){i("qMM6"),i("wu79")},n=i("8AGX")(a.a,s,!1,o,"data-v-105f1197",null);e.default=n.exports},hbDG:function(t,e,i){"use strict";(function(t){var a=i("Xtis"),s=i("a2vD"),o=i("HPzi"),n=i("6nXL"),r=i("aJ9H"),c=i.n(r);e.a={data:function(){return{height:0,form:{name:"",arrRight:[]},platformer_id:"",positionId:"",agentId:"",rules:{name:[{required:!0,validator:function(t,e,i){""===e?i(new Error("请输入职位姓名")):e.length>20?i(new Error("职位名称不能超过20字")):!0===/[\s]+/g.test(e)?i(new Error("部门名称不能包含空格符")):i()},trigger:"input,change"}]},isOffRight:!1,isCheckAll:!1,isSave:!1,isSaveAdd:!1,isCantClick:!0}},created:function(){var e=this;this.height=document.documentElement.clientHeight-271+"px",t(window).resize(function(){e.height=document.documentElement.clientHeight-271+"px"}),this.$route.query.positionId&&this.initData(),this.platformer_id=this.$route.query.platformer_id,this.agentId=s.a.getAgentid()},methods:{initData:function(){var e=this;this.positionId=this.$route.query.positionId||"";var i={get_ag_position_info:1,ag_position_id:this.positionId};Object(a.c)(i).then(function(i){0===i.ret&&(e.form.name=i.data.position_info.ag_position_name,i.data.permission&&i.data.permission.length>0?(1===i.data.permission[0]?(e.isCheckAll=!0,e.form.arrRight=c.a):(e.isCheckAll=!1,e.form.arrRight=Object(o.b)(i.data.permission)),e.isOffRight=!1):(e.form.arrRight=[],e.isOffRight=!0,t(".no-right").attr("disabled",!0),t(".not-all").attr("disabled",!0)),e.cheInput("form"))})},cheInput:function(t){var e=this;this.$refs[t].validate(function(t){e.isCantClick=!t})},handleCheckAllChange:function(t){this.form.arrRight=t?c.a:[]},handleCheckedCitiesChange:function(t){var e=t.length;this.isCheckAll=e===c.a.length},goEditStaffInfo:function(){this.$router.push({path:this.$route.query.pathName,query:{positionName:this.form.name,ag_employee_id:this.$route.query.ag_employee_id,activeIndex:this.$route.query.activIndex,choosed_depart_name:this.$route.query.choosed_depart_name,choosed_depart_id:this.$route.query.choosed_depart_id}})},saveAddInfo:function(){var t=this,e=[n.x.ALL],i={ag_position_save:1,ag_position_name:this.form.name,ag_position_permission:e,ag_position_note:"备注",agent_id:this.agentId};""!==this.positionId&&(i.pl_position_id=this.positionId),Object(a.d)(i).then(function(e){0===e.ret?(t.$refs.form.resetFields(),t.form.arrRight=[],t.$slnotify({message:"保存成功,请继续添加"})):-20034===e.ret&&t.$slnotify({message:"该职位已存在"})}),this.isCantClick=!0},saveInfo:function(){var t=this;this.isSave=!0;var e=[n.x.ALL],i={ag_position_save:1,ag_position_name:this.form.name,ag_position_permission:e,ag_position_note:"备注",agent_id:this.agentId};""!==this.positionId&&(i.ag_position_id=this.positionId),Object(a.d)(i).then(function(e){0===e.ret?(t.$slnotify({message:"保存成功"}),t.$router.push({path:t.$route.query.pathName,query:{positionName:t.form.name,ag_employee_id:t.$route.query.ag_employee_id,ag_position_id:e.data.ag_position_id,activeIndex:t.$route.query.activIndex,choosed_depart_name:t.$route.query.choosed_depart_name,choosed_depart_id:t.$route.query.choosed_depart_id}})):-20034===e.ret&&t.$slnotify({message:"该职位已存在"})})},unFinish:function(){this.$slnotify({message:"请输入职位"})},cancelInfo:function(){this.$route.query.platformer_id?this.$router.push({path:this.$route.query.pathName,query:{platformer_id:this.platformer_id,ag_position_id:this.$route.query.ag_position_id,positionName:this.$route.query.position_name,ag_employee_id:this.$route.query.ag_employee_id,activeIndex:this.$route.query.activIndex,choosed_depart_name:this.$route.query.choosed_depart_name,choosed_depart_id:this.$route.query.choosed_depart_id}}):this.$router.push({path:this.$route.query.pathName,query:{ag_employee_id:this.$route.query.ag_employee_id,ag_position_id:this.$route.query.ag_position_id,positionName:this.$route.query.position_name,activeIndex:this.$route.query.activIndex,choosed_depart_name:this.$route.query.choosed_depart_name,choosed_depart_id:this.$route.query.choosed_depart_id}})}}}}).call(e,i("tra3"))},qMM6:function(t,e){},wu79:function(t,e){}});