webpackJsonp([87],{"8yss":function(t,e){},BvQe:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("9aGi"),s=a("a2vD"),n=a("EuEE"),l=a("6nXL"),r=a("lbRB"),c={components:{SelectCity:i.a},data:function(){return{agent_id:"",agent_type:"",agent_level:"",agent_name:"",phone:"",password:"",passwordRepeat:"",real_name:"",telephone:"",email:"",address:"",agent_province:"",agent_city:"",agent_area:"",from:"",from_salesman:"",nameErr:!1,phoneErr:!1,passwordErr:!1,passwordformatErr:!1,contactErr:!1,contactPhoneErr:!1,isHidepwd:!0,isHidepwdrepeat:!0,cancelDialogVisible:!1,agentTypeData:[{label:l.f.toString(l.f.AREA),value:l.f.AREA},{label:l.f.toString(l.f.INDUSTRY),value:l.f.INDUSTRY}],agentLevelData:[{label:l.d.toString(l.d.FIRST),value:l.d.FIRST},{label:l.d.toString(l.d.SECOND),value:l.d.SECOND},{label:l.d.toString(l.d.THREE),value:l.d.THREE}],salesmanOptions:[],fromOptions:[],cityinfo:{province:"",city:"",area:""},AgentType:l.f,AgentLevel:l.d}},computed:{showCreatedBtn:function(){return this.agent_type===l.f.AREA?!!(this.agent_province&&this.agent_name&&this.phone&&this.real_name&&this.telephone&&this.address&&this.from&&this.from_salesman):!!(this.agent_name&&this.phone&&this.real_name&&this.telephone&&this.address&&this.from&&this.from_salesman)},isShowAddressTip:function(){return!(this.address.length>15)}},created:function(){this.getAgentinfo(),this.getPlatformerinfo()},methods:{goagentdetail:function(){this.$router.push({path:"/agentlist/detail",query:{agentid:this.agent_id}})},goList:function(){var t=void 0;t=this.agent_type===l.f.INDUSTRY,this.$router.push({path:"/agent/list",query:{isindustry:t}})},clearTip:function(){this.nameErr=!1,this.phoneErr=!1,this.passwordErr=!1,this.passwordformatErr=!1,this.contactErr=!1,this.contactPhoneErr=!1},hidepwd:function(){this.isHidepwd=!0},showpwd:function(){this.isHidepwd=!1},hidepwdReapeat:function(){this.isHidepwdrepeat=!0},showpwdReapeat:function(){this.isHidepwdrepeat=!1},checkPwd:function(){return this.password===this.passwordRepeat||(this.passwordErr=!0,!1)},openCancelDialog:function(){this.cancelDialogVisible=!0},hideCancelDialog:function(){this.cancelDialogVisible=!1},cancelEditor:function(){this.$router.go(-1)},getCity:function(t){this.agent_province=t.province,this.agent_city=t.city,this.agent_area=t.blocks},getAgentinfo:function(){var t=this;this.agent_id=this.$route.query.agentid||"";var e={agent_info:1,agent_id:this.agent_id,type:1};Object(r.c)(e).then(function(e){if(0===e.ret){var a=e.data.agent_info;t.agent_type=a.agent_type,t.agent_level=a.agent_level,t.agent_name=a.agent_name,t.phone=a.phone,t.real_name=a.real_name,t.telephone=a.telephone,t.email=a.email||"",t.address=a.address,t.from=a.from,t.from_salesman=a.from_salesman,t.agent_type===l.f.AREA&&(t.agent_province=a.agent_province,t.agent_city=a.agent_city,t.agent_area=a.agent_area,t.cityinfo.province=a.agent_province,t.cityinfo.city=a.agent_city,t.cityinfo.area=a.agent_area)}})},getPlatformerinfo:function(){var t=this,e={get_platformer_info:1,platformer_id:s.a.getPlatformerid()};Object(r.f)(e).then(function(e){if(0===e.ret){var a=e.data.platformer;t.salesmanOptions=a.salesman_record||[],t.fromOptions=a.from_record||[]}})},check:function(){var t=!1;return this.checkPhone()||(t=!0),this.checkTelephone()||(t=!0),this.checkAgentName()||(t=!0),this.checkRealName()||(t=!0),""===this.email||this.checkEmail()||(t=!0),t},saveAgent:function(){var t=this;if(!this.check()){var e={agent_save:1,platformer_id:s.a.getPlatformerid(),agent_id:this.agent_id,phone:this.phone,agent_type:this.agent_type,agent_level:this.agent_level,agent_name:this.agent_name,telephone:this.telephone,real_name:this.real_name,address:this.address,from:this.from,from_salesman:this.from_salesman};this.email&&(e.email=this.email),this.agent_type===l.f.AREA&&(e.agent_province=this.agent_province,this.agent_city&&(e.agent_city=this.agent_city),this.agent_area&&(e.agent_area=this.agent_area)),Object(r.d)(e).then(function(e){0===e.ret?(t.$slnotify({message:"操作成功"}),setTimeout(function(){t.goList()},1500)):t.$slnotify({message:l.w.toString(e.ret)})})}},checkPhone:function(){var t=n.a.checkPhone(this.phone);return t||(this.phoneErr=!0),t},checkTelephone:function(){var t=n.a.checkPhone(this.telephone);return t||(this.contactPhoneErr=!0),t},checkAgentName:function(){var t=this.agent_name.trim(),e=n.a.checkName(t);return e||(this.nameErr=!0),e},checkRealName:function(){var t=this.real_name.trim(),e=n.a.checkName(t);return e||(this.contactErr=!0),e},checkEmail:function(){var t=n.a.checkEmail(this.email);return t||(this.emailErr=!0),t},checkPasswordFormat:function(){var t=n.a.checkPassword(this.password);return t||(this.passwordformatErr=!0),t}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"agnet-detail-editor"}},[a("div",{staticClass:"breadcrumb"},[a("el-breadcrumb",{attrs:{separator:">"}},[a("el-breadcrumb-item",{nativeOn:{click:function(e){t.goList(e)}}},[t._v("代理商列表")]),t._v(" "),a("el-breadcrumb-item",{nativeOn:{click:function(e){t.goagentdetail(e)}}},[t._v("代理商详情")]),t._v(" "),a("el-breadcrumb-item",[t._v("编辑代理商")])],1)],1),t._v(" "),a("div",{staticClass:"editor-content"},[a("div",{staticClass:"title"},[t._v("基础信息")]),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"item clearfix"},[t._m(0),t._v(" "),a("div",{staticClass:"item-right fl"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.agent_type,callback:function(e){t.agent_type=e},expression:"agent_type"}},t._l(t.agentTypeData,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)]),t._v(" "),a("div",{staticClass:"item clearfix"},[t._m(1),t._v(" "),a("div",{staticClass:"item-right fl"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.agent_level,callback:function(e){t.agent_level=e},expression:"agent_level"}},t._l(t.agentLevelData,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.AgentType.AREA===t.agent_type,expression:"AgentType.AREA === agent_type"}],staticClass:"item clearfix selectCity"},[t._m(2),t._v(" "),a("div",{staticClass:"item-right fl"},[a("select-city",{attrs:{cityinfo:t.cityinfo},on:{changeProvinces:t.getCity}})],1)]),t._v(" "),a("div",{staticClass:"item clearfix"},[t._m(3),t._v(" "),a("div",{staticClass:"item-right fl"},[a("el-input",{class:{"border-redtip":t.nameErr},attrs:{placeholder:"请输入代理商名称"},nativeOn:{input:function(e){t.clearTip(e)}},model:{value:t.agent_name,callback:function(e){t.agent_name=e},expression:"agent_name"}})],1),t._v(" "),t.nameErr?a("div",{staticClass:"errtip fl"},[a("span",[t._v("请输入中文、字母或数字")])]):t._e()]),t._v(" "),a("div",{staticClass:"item clearfix"},[t._m(4),t._v(" "),a("div",{staticClass:"item-right fl"},[a("el-input",{class:{"border-redtip":t.phoneErr},attrs:{placeholder:"请输入登录手机号"},nativeOn:{input:function(e){t.clearTip(e)}},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}})],1),t._v(" "),t.phoneErr?a("div",{staticClass:"errtip fl"},[a("span",[t._v("请输入正确格式的手机号码")])]):t._e()]),t._v(" "),a("div",{staticClass:"item clearfix"},[t._m(5),t._v(" "),a("div",{staticClass:"item-right fl"},[a("el-input",{class:{"border-redtip":t.contactErr},attrs:{placeholder:"请输入联系人姓名"},nativeOn:{input:function(e){t.clearTip(e)}},model:{value:t.real_name,callback:function(e){t.real_name=e},expression:"real_name"}})],1),t._v(" "),t.contactErr?a("div",{staticClass:"errtip fl"},[a("span",[t._v("请输入中文、字母或数字")])]):t._e()]),t._v(" "),a("div",{staticClass:"item clearfix"},[t._m(6),t._v(" "),a("div",{staticClass:"item-right fl"},[a("el-input",{class:{"border-redtip":t.contactPhoneErr},attrs:{placeholder:"请输入联系人电话"},nativeOn:{input:function(e){t.clearTip(e)}},model:{value:t.telephone,callback:function(e){t.telephone=e},expression:"telephone"}})],1),t._v(" "),t.contactPhoneErr?a("div",{staticClass:"errtip fl"},[a("span",[t._v("请输入正确格式的手机号码")])]):t._e()]),t._v(" "),a("div",{staticClass:"item clearfix"},[t._m(7),t._v(" "),a("div",{staticClass:"item-right fl"},[a("el-input",{attrs:{placeholder:"请输入联系人邮箱"},nativeOn:{input:function(e){t.clearTip(e)}},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)]),t._v(" "),a("div",{staticClass:"item clearfix"},[t._m(8),t._v(" "),a("div",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],staticClass:"item-right fl"},[a("el-input",{attrs:{placeholder:"请输入详细地址"},nativeOn:{input:function(e){t.clearTip(e)}},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}}),t._v(" "),a("el-popover",{ref:"popover",attrs:{disabled:t.isShowAddressTip,placement:"top-start",width:"300",trigger:"hover",content:t.address}})],1)]),t._v(" "),a("div",{staticClass:"item clearfix"},[t._m(9),t._v(" "),a("div",{staticClass:"item-right fl"},[a("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择来源"},on:{change:t.clearTip},model:{value:t.from,callback:function(e){t.from=e},expression:"from"}},t._l(t.fromOptions,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})}))],1)]),t._v(" "),a("div",{staticClass:"item clearfix"},[t._m(10),t._v(" "),a("div",{staticClass:"item-right fl"},[a("el-select",{attrs:{filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择所属销售"},on:{change:t.clearTip},model:{value:t.from_salesman,callback:function(e){t.from_salesman=e},expression:"from_salesman"}},t._l(t.salesmanOptions,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})}))],1)])]),t._v(" "),a("div",{staticClass:"btn-group"},[t.showCreatedBtn?a("div",{staticClass:"create",on:{click:t.saveAgent}},[t._v("保存")]):a("div",{staticClass:"create-disabled"},[t._v("保存")]),t._v(" "),a("div",{staticClass:"cancel",on:{click:t.openCancelDialog}},[t._v("取消")])])]),t._v(" "),a("el-dialog",{staticClass:"nopadding cancel-dialog",attrs:{visible:t.cancelDialogVisible,width:"600px",top:"35vh",center:""},on:{"update:visible":function(e){t.cancelDialogVisible=e}}},[a("div",{staticClass:"cancel-content"},[a("span",[t._v("将放弃填写内容，确定取消本次编辑？")])]),t._v(" "),a("div",{staticClass:"btn-dialog",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"btn-Dialogok",on:{click:t.cancelEditor}},[t._v("确认")]),t._v(" "),a("div",{staticClass:"btn-Dialogcancel",on:{click:t.hideCancelDialog}},[t._v("取消")])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("代理商类型")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("代理商级别")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("代理区域")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("代理商名称")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("登录手机号")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("联系人")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("联系电话")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",[this._v("邮箱")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("地址")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("来源")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-left fl"},[e("span",{staticClass:"sl-must"},[this._v("所属销售")])])}]};var h=a("X4nt")(c,o,!1,function(t){a("y4ap"),a("8yss")},"data-v-32a536a8",null);e.default=h.exports},y4ap:function(t,e){}});