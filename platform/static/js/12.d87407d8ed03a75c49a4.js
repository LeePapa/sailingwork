webpackJsonp([12,60,61],{"2M8D":function(t,e){},"2cQM":function(t,e){},"3dez":function(t,e){},"6r2b":function(t,e){},BjTF:function(t,e){},IAjK:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("6nXL"),s=a("swMD"),n=a("Ndwn"),r=a("KTdL"),o={data:function(){return{activeIndex:"1",height:0,tableHeight:0,total:50,isListEmpty:!1,searchNone:!1,listQuery:{page:1,limit:10},staffTree:[],staffList:[],statusArr:[{label:"启用",value:"0"},{label:"冻结",value:"1"}],searchStatus:"",searchName:"",defaultProps:{label:"label"}}},created:function(){this.$route.query.activeIndex&&(this.activeIndex=this.$route.query.activeIndex),s.a.removeItem("#OFF_ORG_FORM")},computed:{isNoFreezed:function(){return i.m.NO}},components:{staffTable:n.default,rankTable:r.default},methods:{createdNew:function(){"1"===this.activeIndex?this.$router.push({path:"/industryOrganziteList/staffDetail"}):this.$router.push({path:"/industryOrganziteList/positionDetail",query:{pathName:"/industryagent/organize",activIndex:"2"}})},handleSelect:function(t){this.activeIndex=t}}},l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"staff-list"}},[e("div",{staticClass:"titlebar"},[e("el-menu",{attrs:{"default-active":this.activeIndex,mode:"horizontal"},on:{select:this.handleSelect}},[e("el-menu-item",{attrs:{index:"1"}},[this._v("员工管理")]),this._v(" "),e("el-menu-item",{attrs:{index:"2"}},[this._v("职位管理")])],1),this._v(" "),e("div",{staticClass:"btn-right",on:{click:this.createdNew}},[e("span",{staticClass:"add-icon"}),this._v(" "),"1"===this.activeIndex?e("span",{staticClass:"creat-btn"},[this._v("创建员工")]):e("span",{staticClass:"creat-btn"},[this._v("创建职位")])])],1),this._v(" "),e("div",{staticClass:"table-content"},["1"===this.activeIndex?e("staff-table"):e("rank-table")],1)])},staticRenderFns:[]},d=a("8AGX")(o,l,!1,function(t){a("2cQM"),a("LGYZ")},"data-v-c118b002",null);e.default=d.exports},KTdL:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("v6l/"),s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{style:{height:t.height},attrs:{id:"position-inda"}},[i("el-table",{attrs:{data:t.tableData,height:t.tableHeight,stripe:""}},[i("el-table-column",{attrs:{label:"职位",prop:"ag_position_name","min-width":"50%",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作","min-width":"50%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return 0!==e.row.is_edit?[i("span",{staticClass:"text-blue",attrs:{size:"small",type:"text"},on:{click:function(a){t.editMethods(e.row)}}},[t._v("编辑\n         ")]),t._v(" "),i("span",{staticClass:"text-red",attrs:{size:"small",type:"text"},on:{click:function(a){t.handleDelete(e.row)}}},[t._v("删除\n         ")])]:void 0}}])})],1),t._v(" "),i("div",{staticClass:"page"},[i("div",{staticClass:"pagination-content"},[i("el-pagination",{staticClass:"page-el",attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,40],"page-size":t.listQuery.limit,layout:"sizes, jumper, prev, pager, next",total:t.total},on:{"update:currentPage":function(e){t.$set(t.listQuery,"page",e)},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)]),t._v(" "),t.isListEmpty?i("div",{staticClass:"data-empty"},[0==t.searchNone?i("div",{staticClass:"img"},[i("img",{attrs:{src:a("QLhs")}}),t._v(" "),i("div",{staticClass:"text-center"},[t._v("暂无数据...")])]):t._e(),t._v(" "),1==t.searchNone?i("div",{staticClass:"img"},[i("img",{attrs:{src:a("OagY")}}),t._v(" "),i("div",{staticClass:"text-center"},[t._v("暂无搜索数据...")])]):t._e()]):t._e(),t._v(" "),t.isOperate?i("operate-dialog",{attrs:{operateText:t.operateText,operateSuccessTxt:t.operateSuccessTxt,isShowRedBtn:t.isShowRedBtn,operateFailTxt:t.operateFailTxt},on:{dialogClose:t.dialogClose,confimOper:t.confimOper}}):t._e()],1)},staticRenderFns:[]},n=function(t){a("2M8D"),a("3dez")},r=a("8AGX")(i.a,s,!1,n,"data-v-34e8d6c7",null);e.default=r.exports},LGYZ:function(t,e){},Ndwn:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("zYAc"),s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"staff-list-area"}},[i("div",{staticClass:"staff-tree change-tree-default"},[i("div",{staticClass:"change-tree-default"},[i("el-tree",{ref:"tree",style:{height:t.height},attrs:{data:t.staffTree,props:t.defaultProps,"default-expand-all":"","highlight-current":t.isHighlight,"render-content":t.renderContent,"node-key":"label","expand-on-click-node":!0},on:{"current-change":t.currentChange,"node-click":t.handleNodeClick,"node-expand":t.nodeExpand,"node-collapse":t.nodeExpand}}),t._v(" "),i("span",{staticClass:"tree-add",on:{click:t.addNewPosition}})],1)]),t._v(" "),i("div",{staticClass:"staff-table",style:{height:t.height}},[i("div",{staticClass:"search-content"},[i("span",[t._v("姓名")]),t._v(" "),i("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:t.searchName,callback:function(e){t.searchName=e},expression:"searchName"}}),t._v(" "),i("span",[t._v("状态")]),t._v(" "),i("el-select",{model:{value:t.searchStatus,callback:function(e){t.searchStatus=e},expression:"searchStatus"}},t._l(t.statusArr,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),i("div",{staticClass:"search-btn",on:{click:t.searchMethods}},[t._v("搜索")])],1),t._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{border:"",height:t.tableHeight,data:t.staffList,stripe:""},on:{"sort-change":t.sort}},[i("el-table-column",{attrs:{prop:"ag_employee_id",label:"员工编号",align:"center","min-width":"10%",sortable:"true"}}),t._v(" "),i("el-table-column",{attrs:{prop:"real_name",label:"姓名",align:"center","min-width":"10%","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"phone",label:"登录手机号",align:"center","min-width":"11%"}}),t._v(" "),i("el-table-column",{attrs:{prop:"ag_department_name",label:"部门",align:"center","min-width":"8%","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"ag_position_name",label:"职位",align:"center","min-width":"8%","show-overflow-tooltip":""}}),t._v(" "),i("el-table-column",{attrs:{prop:"remark",label:"备注",align:"center","min-width":"20%","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.remark?i("span",{attrs:{size:"small","min-width":"20%"}},[t._v(t._s(e.row.remark)+"\n          ")]):i("span",{attrs:{size:"small"}},[t._v("--\n          ")])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"状态",prop:"is_freeze",align:"center","min-width":"7%",sortable:"true"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.is_freeze===t.isNoFreezed?i("span",{attrs:{size:"small"}},[t._v("启用\n\n          ")]):i("span",{attrs:{size:"small"}},[t._v("冻结\n\n          ")])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作","min-width":"25%",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.is_freeze===t.isNoFreezed?i("span",{staticClass:"text-red",attrs:{size:"small",type:"info"},on:{click:function(a){t.handleModifyStatus(e.row,1)}}},[t._v("冻结\n\n          ")]):i("span",{staticClass:"text-green",attrs:{size:"small",type:"success"},on:{click:function(a){t.handleModifyStatus(e.row,0)}}},[t._v("启用\n\n          ")]),t._v(" "),i("router-link",{attrs:{to:{path:"/industryOrganziteList/cantEditStaffDetail",query:{ag_employee_id:e.row.ag_employee_id,activIndex:"1",choosed_depart_id:t.choosedDepartId,choosed_depart_name:t.choosedDepartName}}}},[i("span",{staticClass:"text-blue",attrs:{size:"small",type:"text"}},[t._v("查看\n\n            ")])]),t._v(" "),i("router-link",{attrs:{to:{path:"/industryOrganziteList/staffDetail",query:{ag_employee_id:e.row.ag_employee_id,activIndex:"1",choosed_depart_id:t.choosedDepartId,choosed_depart_name:t.choosedDepartName}}}},[i("span",{staticClass:"text-blue",attrs:{size:"small",type:"text"}},[t._v("编辑\n\n            ")])]),t._v(" "),i("span",{staticClass:"text-red",attrs:{size:"small",type:"text"},on:{click:function(a){t.handleDeleteBtn(e.row)}}},[t._v("删除\n\n          ")])]}}])})],1),t._v(" "),i("div",{staticClass:"page"},[i("div",{staticClass:"pagination-content"},[i("el-pagination",{staticClass:"page-el",attrs:{"current-page":t.listQuery.page,"page-sizes":[10,20,40],"page-size":t.listQuery.limit,layout:"sizes, jumper, prev, pager, next",total:t.total},on:{"update:currentPage":function(e){t.$set(t.listQuery,"page",e)},"current-change":t.handleCurrentChange,"size-change":t.handleSizeChange}})],1)]),t._v(" "),t.isListEmpty?i("div",{staticClass:"data-empty"},[0==t.searchNone?i("div",{staticClass:"img"},[i("img",{attrs:{src:a("QLhs")}}),t._v(" "),i("div",{staticClass:"text-center"},[t._v("暂无数据...")])]):t._e(),t._v(" "),1==t.searchNone?i("div",{staticClass:"img"},[i("img",{attrs:{src:a("OagY")}}),t._v(" "),i("div",{staticClass:"text-center"},[t._v("暂无搜索数据...")])]):t._e()]):t._e()],1),t._v(" "),t.isOperate?i("operate-dialog",{attrs:{operateText:t.operateText,operateSuccessTxt:t.operateSuccessTxt,isShowRedBtn:t.isShowRedBtn,operateFailTxt:t.operateFailTxt},on:{dialogClose:t.dialogClose,confimOper:t.confimOper}}):t._e(),t._v(" "),t.isDetailDialog?i("detail-dialog",{attrs:{departmentName:t.departmentName,suOrfa:t.suOrfa,tipsText:t.tipsText,repeat:t.repeat},on:{confirmAdd:t.confirmAdd,handleClose:t.dialogClose}}):t._e()],1)},staticRenderFns:[]},n=function(t){a("BjTF"),a("6r2b")},r=a("8AGX")(i.a,s,!1,n,"data-v-fd095f00",null);e.default=r.exports},"v6l/":function(t,e,a){"use strict";(function(t){var i=a("D9vu"),s=a("p77j"),n=a("a2vD"),r=a("swMD"),o=a("+vDi");e.a={data:function(){return{isOperate:!1,isShowRedBtn:!1,tableData:[],testList:[],tableHeight:0,height:0,operateSuccessTxt:"",operateFailTxt:"",operateText:"",total:50,isListEmpty:!1,searchNone:!1,agentId:"",listQuery:{page:1,limit:10}}},created:function(){var e=this;this.tableHeight=document.documentElement.clientHeight-200,this.height=document.documentElement.clientHeight-140+"px",t(window).resize(function(){e.tableHeight=document.documentElement.clientHeight-200,e.height=document.documentElement.clientHeight-140+"px"}),this.agentId=n.a.getAgentid(),this.initData()},components:{operateDialog:o.a},methods:{initData:function(){var t=this,e={get_ag_position_list:1,agent_id:this.agentId,page_size:1e5,page_no:1};Object(i.c)(e).then(function(e){if(0===e.ret){var a=e.data.position_list;a&&a.length>0?(t.testList=a,t.testList=Object(s.a)(t.testList),r.a.getItem("Idus_page_size")?(t.listQuery.limit=r.a.getItem("Idus_page_size"),t.tableData=Object(s.d)(t.testList,t.listQuery.limit,t.listQuery.page)):t.tableData=Object(s.d)(t.testList,10,t.listQuery.page),t.total=a.length,t.isListEmpty=!1):(t.tableData=[],t.isListEmpty=!0)}})},editMethods:function(t){this.$router.push({path:"/industryOrganziteList/positionDetail",query:{pathName:"/industryagent/organize",activIndex:"2",positionId:t.ag_position_id}})},handleDelete:function(t){this.operateData=t,this.operateText="确定删除此条目？",this.isShowRedBtn=!0,this.isOperate=!this.isOperate},dialogClose:function(){this.operateText="",this.operateSuccessTxt="",this.operateFailTxt="",this.isOperate=!1},confimOper:function(){var t=this,e={del_ag_position:1,agent_id:this.agentId,ag_position_id:this.operateData.ag_position_id};Object(i.d)(e).then(function(e){0===e.ret?(t.operateSuccessTxt="删除成功",t.initData()):-30039===e.ret&&(t.operateFailTxt="该条目下包含数据，不能被删除")})},handleSizeChange:function(t){this.listQuery.limit=t,r.a.setItem("Idus_page_size",this.listQuery.limit),this.tableData=Object(s.d)(this.testList,this.listQuery.limit,this.listQuery.page)},handleCurrentChange:function(t){this.listQuery.page=t,this.tableData=Object(s.d)(this.testList,this.listQuery.limit,this.listQuery.page)}}}}).call(e,a("tra3"))},zYAc:function(t,e,a){"use strict";(function(t){var i=a("+vDi"),s=a("pMNc"),n=a("6nXL"),r=a("D9vu"),o=a("a2vD"),l=a("p77j"),d=a("nMBb");e.a={data:function(){return{agentId:"",newName:"",newDpaId:"",isOperate:!1,isListEmpty:!1,searchNone:!1,isDetailDialog:!1,isShowRedBtn:!1,isFreezeMethods:!1,isDeleDepart:!1,isSearch:!1,suOrfa:!0,repeat:!1,isHighlight:!1,isSort:!1,sortLabel:"",sortOrder:1,height:0,tableHeight:0,depart_id:"",treeNodeKey:"",tipsText:"",searchStatus:"",searchName:"",operateSuccessTxt:"",operateFailTxt:"",operateText:"",departmentName:"",departmentId:"",operateStatus:"",operateData:{},total:0,listQuery:{page:1,limit:10},staffList:[],staffTree:[{label:"部门管理",children:[]}],statusArr:[{label:"全部",value:""},{label:n.m.toString(n.m.NO),value:n.m.NO},{label:n.m.toString(n.m.YES),value:n.m.YES}],treeDataArr:[],choosedDepartId:"",choosedDepartName:"",defaultProps:{label:"label",children:"children"}}},created:function(){var e=this;this.tableHeight=document.documentElement.clientHeight-274,this.height=document.documentElement.clientHeight-159+"px",t(window).resize(function(){e.height=document.documentElement.clientHeight-159+"px",e.tableHeight=document.documentElement.clientHeight-274}),this.agentId=o.a.getAgentid(),this.getStaffTree(),void 0!==this.$route.query.choosedDepartId&&""!==this.$route.query.choosedDepartId?(this.choosedDepartId=this.$route.query.choosedDepartId,this.choosedDepartName=this.$route.query.choosedDepartName,this.getDepartStaff(this.$route.query.choosedDepartId)):(this.$nextTick(function(){e.newName=e.staffTree[0].label,e.$refs.tree.setCurrentKey(e.newName),e.isHighlight=!0}),this.getStaffList())},computed:{isNoFreezed:function(){return n.m.NO}},watch:{treeDataArr:function(t){var e=this;this.$nextTick(function(){e.$route.query.choosedDepartName&&(e.newName=e.$route.query.choosedDepartName,e.$refs.tree.setCurrentKey(e.newName),e.isHighlight=!0)})}},components:{operateDialog:i.a,detailDialog:d.a},methods:{getStaffList:function(){var t=this;this.searchStatus!==n.m.NO&&this.searchStatus!==n.m.YES&&(this.searchStatus="");var e={get_ag_employee_list:1,page_size:this.listQuery.limit,page_no:this.listQuery.page,agent_id:this.agentId};this.searchName&&(e.real_name=this.searchName),(this.searchStatus||0===this.searchStatus)&&(e.is_freeze=this.searchStatus),this.isSort&&(e.sort_name=this.sortLabel,e.desc=this.sortOrder),this.depart_id&&(e.ag_department_id=this.depart_id),Object(r.a)(e).then(function(e){0===e.ret&&(e.data.ag_employee_list&&e.data.ag_employee_list.length>0?(t.staffList=e.data.ag_employee_list,t.isListEmpty=!1,t.total=e.data.total):(t.staffList=[],t.isListEmpty=!0,!0===t.isSearch?t.searchNone=!0:t.searchNone=!1))})},getStaffTree:function(){this.staffTree[0].children=Object(l.b)(),this.treeDataArr=this.staffTree[0].children},getNewNode:function(){},getDepartStaff:function(t){var e=this,a={get_department_agent:1,ag_department_id:t};Object(r.g)(a).then(function(t){0===t.ret&&(t.data.ag_employee_list&&t.data.ag_employee_list.length>0?(e.staffList=t.data.ag_employee_list,e.isListEmpty=!1):(e.staffList=[],e.isListEmpty=!0,!0===e.isSearch?e.searchNone=!0:e.searchNone=!1),e.isSearch=!1)})},sort:function(t){this.sortLabel=t.prop,"descending"===t.order?(this.isSort=!0,this.sortOrder=-1):"ascending"===t.order?(this.isSort=!0,this.sortOrder=1):this.isSort=!1,this.getStaffList()},FreezeStaffMethods:function(){var t=this,e={ag_employee_freeze:1,agent_id:this.agentId,ag_employee_id:this.operateData.ag_employee_id,is_freeze:this.operateStatus};Object(r.b)(e).then(function(e){0===e.ret&&(t.operateStatus!==t.isNoFreezed?t.operateSuccessTxt="冻结成功":t.operateSuccessTxt="启用成功",t.getStaffList(),t.isFreezeMethods=!1)})},deleteStaffMethods:function(){var t=this,e={ag_employee_del:1,ag_employee_id:this.operateData.ag_employee_id,agent_id:this.agentId};Object(r.b)(e).then(function(e){0===e.ret&&(t.operateSuccessTxt="删除成功",t.getStaffList())})},deleteDepartMethods:function(){var t=this,e={ag_department_del:1,ag_department_id:this.operateData.ag_department_id};Object(r.h)(e).then(function(e){0===e.ret?(t.operateSuccessTxt="删除成功",t.newName="",t.depart_id="",t.getStaffTree()):-30033===e.ret&&(t.operateFailTxt="该条目下包含数据，不能被删除",t.getStaffTree(),t.newName=t.treeNodeKey,t.getDepartStaff(t.depart_id)),t.isDeleDepart=!0})},handleSelect:function(t){this.activeIndex=t},currentChange:function(){this.isHighlight=!0},nodeExpand:function(t,e){this.listQuery.page=1,this.isHighlight=!1;var a=e.key;this.$refs.tree.setCurrentKey(a),this.isSearch=!1,this.depart_id=e.data.ag_department_id,e.childNodes&&0===e.childNodes.length?this.getDepartStaff(e.data.ag_department_id):(this.searchName="",this.searchStatus="",this.getStaffList())},handleNodeClick:function(t,e){this.isSearch=!1,this.listQuery.page=1,this.treeNodeKey=e.key,this.depart_id=e.data.ag_department_id,e.childNodes&&0===e.childNodes.length?(this.getDepartStaff(e.data.ag_department_id),this.choosedDepartId=t.ag_department_id,this.choosedDepartName=e.key):(this.$router.replace("/industryagent/organize"),this.choosedDepartId="",this.choosedDepartName="",this.searchName="",this.searchStatus="",this.getStaffList())},searchMethods:function(){this.isSearch=!0,this.listQuery.page=1,this.getStaffList()},handleSizeChange:function(t){this.listQuery.limit=t,this.getStaffList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getStaffList()},handleModifyStatus:function(t,e){this.isFreezeMethods=!0,e!==this.isNoFreezed?(this.operateText="确定执行冻结操作？",this.isShowRedBtn=!0):(this.operateText="确定执行启用操作？",this.isShowRedBtn=!1),this.isOperate=!this.isOperate,this.operateStatus=e,this.operateData=t,this.isDeleDepart=!1},addNewPosition:function(){this.isDetailDialog=!this.isDetailDialog},confirmAdd:function(t){var e=this;this.tipsText="新建成功!";var a={ag_department_save:1,agent_id:this.agentId,ag_department_name:t};this.newName=t,this.departmentId&&""!==this.departmentId&&(a.ag_department_id=this.departmentId,this.tipsText="修改成功!"),Object(r.h)(a).then(function(t){0===t.ret?(e.newDpaId=t.data.ag_department_id,e.depart_id=e.newDpaId,e.suOrfa=!1,e.repeat=!1,e.getStaffTree()):-20034===t.ret&&(e.suOrfa=!0,e.repeat=!0)})},dialogClose:function(){this.operateText="",this.operateSuccessTxt="",this.operateFailTxt="",this.isOperate=!1,this.isDetailDialog=!1,this.depart_id?this.getDepartStaff(this.depart_id):(this.newName=this.staffTree[0].label,this.searchName="",this.searchStatus="",this.getStaffList()),this.$refs.tree.setCurrentKey(this.newName),this.isHighlight=!0},confimOper:function(){this.isFreezeMethods&&!this.isDeleDepart?this.FreezeStaffMethods():this.isFreezeMethods||this.isDeleDepart?this.isDeleDepart&&(this.deleteDepartMethods(),this.isDeleDepart=!1):this.deleteStaffMethods()},handleDeleteBtn:function(t){this.operateData=t,this.operateText="确定删除此数据？",this.isShowRedBtn=!0,this.isDeleDepart=!1,this.isOperate=!this.isOperate},renderContent:function(t,e){var a=e.node,i=e.data,n=e.store,r=this;return t(s.a,{props:{DATA:i,NODE:a,STORE:n},on:{nodeAdd:function(t,e,a){return r.handleAdd(t,e,a)},nodeEdit:function(t,e,a){return r.handleEdit(t,e,a)},nodeDel:function(t,e,a){return r.handleDelete(t,e,a)}}})},handleAdd:function(t,e,a){this.suOrfa=!0,this.repeat=!1,a.data.ag_department_id?this.$router.push("/industryOrganziteList/staffDetail"):(this.departmentName="",a.expanded||(a.expanded=!0),this.depart_id="",this.isDetailDialog=!this.isDetailDialog)},handleEdit:function(t,e,a){this.suOrfa=!0,this.departmentName=a.data.label,this.departmentId=a.data.ag_department_id,this.treeNodeKey=a.data.label,this.isDetailDialog=!this.isDetailDialog},handleDelete:function(t,e,a){this.suOrfa=!0,this.treeNodeKey=a.data.label,this.operateData=a.data,this.operateText="确定删除此部门？",this.isShowRedBtn=!0,this.isOperate=!this.isOperate,this.isDeleDepart=!0}}}}).call(e,a("tra3"))}});